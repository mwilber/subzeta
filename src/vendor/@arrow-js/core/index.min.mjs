const e="➳❍",n="❍⇚",c="\x3c!--➳❍--\x3e",s="\x3c!--❍⇚--\x3e",a=new Map,f=new Set,u=new Set,i=new WeakMap,l=e=>"\x3c!----\x3e"===e?e:e.replace(/[<>]/g,(e=>">"===e?"&gt;":"&lt;"));function p(e){return(n,c)=>{f.size||setTimeout((function e(){const s=Array.from(f);f.clear();const a=Array.from(u);u.clear(),s.forEach((e=>e(n,c))),a.forEach((e=>e())),f.size&&setTimeout(e)})),f.add(e)}}export function nextTick(e){if(!f.size)return e&&e(),Promise.resolve();let n;const c=new Promise((r=>{n=r}));return u.add((()=>{e&&e(),n()})),c}function d(e,n){a.forEach((c=>{let s=c.get(e);s||(s=new Set,c.set(e,s)),s.add(n)}))}function h(e){return"function"==typeof e&&!!e.isT}function m(e){return"object"==typeof e&&null!==e&&"function"==typeof e.$on}function x(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function g(e){return x(e,"$on")}function y(html){const tpl=document.createElement("template");tpl.innerHTML=html;const dom=tpl.content.cloneNode(!0);return dom.normalize(),dom.childNodes}function E(e=Symbol()){let html="",n=[],c=[],s=[];const a=new Map,f=()=>{c.length||i();const dom=l(_(y(html),n)());return u(),dom};f.ch=()=>s,f.l=0,f.add=tpl=>{if(!tpl&&0!==tpl)return;let key,e=tpl,s=[];var u;h(tpl)?[e,s,key]=tpl._h():e="\x3c!----\x3e"===(u=String(tpl))?u:u.replace(/[<>]/g,(e=>">"===e?"&gt;":"&lt;")),html+=e,html+="\x3c!--❍⇚--\x3e";const i=key&&a.get(key),l=i||{html:e,exp:s,dom:[],tpl,key};c.push(l),key&&(i?i.exp.forEach(((exp,e)=>exp._up(s[e].e))):a.set(key,l)),s.forEach((e=>n.push(e))),f.l++},f._up=()=>{const n=E(e);let a=0,f=s[0].dom[0];c.length||i(document.createComment(""));const l=()=>{if(!n.l)return;const e=n(),s=e.lastChild;f[a?"after":"before"](e),p(n,c,a),f=s};c.forEach(((e,c)=>{const u=s[c];e.key&&e.dom.length?(l(),u&&u.dom===e.dom||f[c?"after":"before"](...e.dom),f=e.dom[e.dom.length-1]):u&&e.html===u.html&&!u.key?(l(),u.exp.forEach(((n,c)=>n._up(e.exp[c].e))),e.exp=u.exp,e.dom=u.dom,f=e.dom[e.dom.length-1]):(n.l||(a=c),n.add(e.tpl))})),l();let d=f.nextSibling;for(;d&&x(d,e);){const e=d.nextSibling;b(d),d=e}u()};const u=()=>{html="",f.l=0,n=[],s=[...c],c=[]},i=e=>{html="\x3c!----\x3e",c.push({html,exp:[],dom:e?[e]:[],tpl:html,key:0})},l=n=>{let s=0;const a=[];return n.childNodes.forEach((n=>{if(8===n.nodeType&&"❍⇚"===n.data)return s++,void a.push(n);Object.defineProperty(n,e,{value:e}),c[s].dom.push(n)})),a.forEach((e=>e.remove())),n},p=(e,n,c)=>{e.ch().forEach(((e,s)=>{n[c+s].dom=e.dom}))};return f}export function t(e,...n){const c=[];let s="";const a=(e,html)=>{if("function"==typeof e){let n=()=>{};return c.push(Object.assign(((...n)=>e(...n)),{e,$on:e=>{n=e},_up:exp=>{e=exp,n()}})),html+"\x3c!--➳❍--\x3e"}return Array.isArray(e)?e.reduce(((html,exp)=>a(exp,html)),html):html+e},f=()=>(s||(s=e.reduce((function(html,e,c){return html+=e,void 0!==n[c]?a(n[c],html):html}),"")),s),u=e=>{const n=_(y(f()),c);return e?n(e):n()};return u.isT=!0,u._k=0,u._h=()=>[f(),c,u._k],u.key=key=>(u._k=key,u),u}function _(dom,e){const n=document.createDocumentFragment();let c;for(;c=dom.item(0);)8!==c.nodeType||"➳❍"!==c.nodeValue?(c instanceof Element&&v(c,e),c.hasChildNodes()&&_(c.childNodes,e)(c),n.append(c),c instanceof HTMLOptionElement&&(c.selected=c.defaultSelected)):n.append(A(c,e));return e=>e?(e.appendChild(n),e):n}function v(e,n){if(!e.hasAttributes())return;const c=e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement,s=e.attributes.length,a=[],f=[];for(let n=0;n<s;n++)f.push(e.attributes[n]);f.forEach((s=>{var f;const u=s.name;if(-1!==s.value.indexOf("\x3c!--➳❍--\x3e")){const s=n.shift();if("@"===u.charAt(0)){const n=u.substring(1);e.addEventListener(n,s),i.has(e)||i.set(e,new Map),null===(f=i.get(e))||void 0===f||f.set(n,s),a.push(u)}else w(s,(n=>{c&&"value"===u?e.value=n:!1!==n?e.setAttribute(u,n):e.removeAttribute(u)}))}})),a.forEach((n=>e.removeAttribute(n)))}function b(e){var n;e.remove(),null===(n=i.get(e))||void 0===n||n.forEach(((n,c)=>e.removeEventListener(c,n)))}function A(e,n){const c=document.createDocumentFragment();e.remove();const s=E(),a=n.shift();if(a&&h(a.e))s.add(a.e);else{s.l&&c.appendChild(s());let e=document.createTextNode("");e=w(a,(n=>M(e,n))),c.appendChild(e instanceof Node?e:e())}return s.l&&c.appendChild(s()),c}function M(e,n){if(!Array.isArray(n))return M(e,[n]);const c="function"==typeof e,s=c?e:E();return n.forEach((e=>s.add(e))),c&&s._up(),s}export function w(e,n){const c=Symbol();a.has(c)||a.set(c,new Map);let s=new Map;const f=p(u);function u(){a.set(c,new Map);const u=e(),i=a.get(c);return a.delete(c),s.forEach(((e,n)=>{const c=i.get(n);c&&c.forEach((n=>e.delete(n))),e.forEach((e=>n.$off(e,f)))})),i.forEach(((e,n)=>{e.forEach((e=>n.$on(e,f)))})),s=i,n?n(u):u}return g(e)&&e.$on(u),u()}function T(e,n){const c=n._st();return c.o&&c.o.forEach(((n,c)=>{n.forEach((n=>{e.$on(c,n)}))})),c.p&&(e._p=c.p),e}function S(op,e,n,c){const s=(...c)=>{const s=Array.prototype[op].call(e,...c);if(e.forEach(((e,c)=>n._em(String(c),e))),n._p){const[e,c]=n._p;c._em(e,n)}return s};switch(op){case"shift":case"pop":case"sort":case"reverse":case"copyWithin":return s;case"unshift":case"push":case"fill":return(...e)=>s(...e.map((e=>r(e))));case"splice":return(e,n,...c)=>s(e,n,...c.map((e=>r(e))));default:return c}}export function r(e,n={}){if(m(e)||"object"!=typeof e)return e;const c=n.o||new Map,s=n.op||new Map,a=Array.isArray(e),f=[],u=a?[]:Object.create(e,{});for(const n in e){const c=e[n];"object"==typeof c&&null!==c?(u[n]=m(c)?c:r(c),f.push(n)):u[n]=c}const i=e=>(n,a)=>{let f=c.get(n),u=s.get(a);f||(f=new Set,c.set(n,f)),u||(u=new Set,s.set(a,u)),f[e](a),u[e](n)},$on=i("add"),$off=i("delete"),_em=(e,n,s)=>{c.has(e)&&c.get(e).forEach((e=>e(n,s)))},l={$on,$off,_em,_st:()=>({o:c,op:s,r:u,p:p._p}),_p:void 0},p=new Proxy(u,{get(...e){const[,n]=e;if(Reflect.has(l,n))return Reflect.get(l,n);const c=Reflect.get(...e);return d(p,n),a&&x(Array.prototype,n)?S(n,u,p,c):c},set(...e){const[n,c,s]=e,a=Reflect.get(n,c);if(Reflect.has(l,c))return Reflect.set(l,c,s);if(s&&m(a)){const o=a,e=o._st(),f=m(s)?T(s,o):r(s,e);return Reflect.set(n,c,f),_em(c,f),e.o.forEach(((e,n)=>{const c=Reflect.get(a,n),s=Reflect.get(f,n);c!==s&&o._em(n,s,c)})),!0}const f=Reflect.set(...e);return f&&(a!==s&&_em(c,s,a),p._p&&p._p[1]._em(...p._p)),f}});return f.map((e=>{p[e]._p=[e,p]})),p}export const html=t;export const reactive=r;export const watch=w;
//# sourceMappingURL=index.min.js.map